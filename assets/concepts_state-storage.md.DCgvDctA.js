import{_ as a,c as e,o as i,ag as t}from"./chunks/framework.DvWQHGvG.js";const c=JSON.parse('{"title":"State Storage","description":"","frontmatter":{},"headers":[],"relativePath":"concepts/state-storage.md","filePath":"concepts/state-storage.md"}'),n={name:"concepts/state-storage.md"};function l(r,s,o,h,p,d){return i(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="state-storage" tabindex="-1">State Storage <a class="header-anchor" href="#state-storage" aria-label="Permalink to &quot;State Storage&quot;">​</a></h1><p>DH-UI uses a persistent state storage system to remember the current state of your trackers and other values between Obsidian sessions.</p><p>This page explains how <strong>state keys</strong> work and how to choose them.</p><h2 id="what-is-stored" tabindex="-1">What is stored <a class="header-anchor" href="#what-is-stored" aria-label="Permalink to &quot;What is stored&quot;">​</a></h2><p>The plugin stores things like:</p><ul><li>HP / Stress / Armor / Hope tracker fill counts.</li><li>Uses remaining on <code>consumables</code> rows.</li><li>Toggle states on traits cards.</li><li>Token counts and other per-card values in pickers.</li></ul><p>All of this is keyed by a <strong>state key</strong> string.</p><h2 id="state-keys" tabindex="-1">State keys <a class="header-anchor" href="#state-keys" aria-label="Permalink to &quot;State keys&quot;">​</a></h2><h3 id="basic-idea" tabindex="-1">Basic idea <a class="header-anchor" href="#basic-idea" aria-label="Permalink to &quot;Basic idea&quot;">​</a></h3><p>A state key is a string that identifies a particular resource (a tracker row, a consumable, etc.).</p><p>Examples:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Consumables</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">state_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_hp_pots&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Vitals (defaults)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hp_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_health::Character/Marlowe&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">stress_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_stress::Character/Marlowe&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">armor_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_armor::Character/Marlowe&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hope_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_hope::Character/Marlowe&quot;</span></span></code></pre></div><p>When you click on a tracker or spend a consumable, DH-UI writes the new filled value to its state key so it can be restored later.</p><h3 id="uniqueness" tabindex="-1">Uniqueness <a class="header-anchor" href="#uniqueness" aria-label="Permalink to &quot;Uniqueness&quot;">​</a></h3><p>State keys should be <strong>stable</strong> and <strong>non-ambiguous</strong>:</p><ul><li>If two components use the <strong>same</strong> key, they will <strong>share</strong> the same state.</li><li>If you want separate resources, give them different keys.</li></ul><p>Good patterns:</p><ul><li>Prefix keys with a namespace like <code>din_</code> to avoid collisions with other plugins.</li><li>Include the character or file name when you want per-character pools.</li></ul><p>Examples:</p><ul><li>❌ <code>domain_tokens</code></li><li>✅ <code>din_domain_tokens::Character/Marlowe</code></li></ul><h2 id="defaults-for-trackers" tabindex="-1">Defaults for trackers <a class="header-anchor" href="#defaults-for-trackers" aria-label="Permalink to &quot;Defaults for trackers&quot;">​</a></h2><p>The <code>vitals</code> block and related single-track blocks use note-scoped defaults based on the current file path:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Implicit defaults if you omit keys</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hp_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:    </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_health::NOTE_PATH&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">stress_key:&quot;din_stress::NOTE_PATH&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">armor_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_armor::NOTE_PATH&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hope_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_hope::NOTE_PATH&quot;</span></span></code></pre></div><p>Where <code>NOTE_PATH</code> is your Obsidian note path (for example, <code>Characters/Marlowe</code>).</p><p>This means:</p><ul><li>Each character note gets its own HP / Stress / Armor / Hope pools by default.</li><li>To share a pool across multiple notes, you can set a <strong>custom key</strong> like <code>din_health::Party</code> in all of them.</li></ul><h2 id="sharing-vs-isolating-state" tabindex="-1">Sharing vs. isolating state <a class="header-anchor" href="#sharing-vs-isolating-state" aria-label="Permalink to &quot;Sharing vs. isolating state&quot;">​</a></h2><h3 id="independent-per-note-trackers" tabindex="-1">Independent per-note trackers <a class="header-anchor" href="#independent-per-note-trackers" aria-label="Permalink to &quot;Independent per-note trackers&quot;">​</a></h3><p>For most character sheets you want <strong>per-note</strong> trackers:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vitals</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">stress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Let DH-UI pick defaults (note-scoped keys)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># hp_key / stress_key omitted</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`</span></span></code></pre></div><p>Each file gets its own HP/stress values, and rest/damage automatically target the correct trackers in that file.</p><h3 id="shared-pools" tabindex="-1">Shared pools <a class="header-anchor" href="#shared-pools" aria-label="Permalink to &quot;Shared pools&quot;">​</a></h3><p>If you want a shared HP pool visible in multiple notes, set the same <code>hp_key</code> explicitly:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vitals</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hp_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;din_health::Party&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`</span></span></code></pre></div><p>Any <code>vitals</code>, <code>hp</code>, <code>rest</code>, or <code>damage</code> blocks that use <code>hp_key: &quot;din_health::Party&quot;</code> will read and write the same HP value.</p><h2 id="where-it-is-stored" tabindex="-1">Where it is stored <a class="header-anchor" href="#where-it-is-stored" aria-label="Permalink to &quot;Where it is stored&quot;">​</a></h2><p>Internally, the plugin stores these values in its own state file (configured in settings) using a JSON-like key/value structure. Keys look like:</p><ul><li><code>tracker:din_health::Characters/Marlowe</code></li><li><code>tracker:din_hp_pots</code></li></ul><p>You normally never need to edit this file by hand; just choose good state keys and let the plugin manage the rest.</p><h2 id="best-practices" tabindex="-1">Best practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best practices&quot;">​</a></h2><ul><li>Use <strong>note-scoped defaults</strong> for most cases; only override keys when you have a reason.</li><li>Use clear prefixes like <code>din_</code> for your own keys.</li><li>Avoid short, generic keys that might collide with other resources.</li><li>When debugging, check that your vitals, rest, and damage blocks are all pointing at the same <code>hp_key</code> if they are meant to work together.</li></ul>`,41)])])}const u=a(n,[["render",l]]);export{c as __pageData,u as default};
